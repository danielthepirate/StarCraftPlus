include "TriggerLibs/NativeLib"

include "LibCMSB_h"

//--------------------------------------------------------------------------------------------------
// Library: CommandSidebar
//--------------------------------------------------------------------------------------------------
// External Library Initialization
void libCMSB_InitLibraries () {
    libNtve_InitVariables();
}

// Custom Script
//--------------------------------------------------------------------------------------------------
// Custom Script: Script
//--------------------------------------------------------------------------------------------------
include "Script/CMSDB"

void libCMSB_InitCustomScript () {
    InitCommandSideBar();
}

// Triggers
//--------------------------------------------------------------------------------------------------
// Trigger: ReplaceOrders
//--------------------------------------------------------------------------------------------------
bool libCMSB_gt_ReplaceOrders_Func (bool testConds, bool runActions) {
    // Variable Declarations
    unit lv_unit;
    unit lv_dummyUnit;
    point lv_position;

    // Variable Initialization
    lv_dummyUnit = EventUnit();
	return false;
    // Conditions
    if (testConds) {
        if (!((UnitGetType(EventUnit()) == "ProbeDummy"))) {
            return false;
        }
    }

    // Actions
    if (!runActions) {
        return true;
    }

    lv_unit = UnitGroupUnit(UnitGroupIdle(1, true), 1);
    lv_dummyUnit = EventUnit();
    UnitIssueOrder(lv_unit, EventUnitOrder(), c_orderQueueReplace);
    UnitIssueOrder(lv_dummyUnit, Order(AbilityCommand("stop", 0)), c_orderQueueReplace);
    return true;
}

//--------------------------------------------------------------------------------------------------
void libCMSB_gt_ReplaceOrders_Init () {
    libCMSB_gt_ReplaceOrders = TriggerCreate("libCMSB_gt_ReplaceOrders_Func");
    TriggerAddEventUnitOrder(libCMSB_gt_ReplaceOrders, null, AbilityCommand("ProtossBuild", 1));
}

void libCMSB_InitTriggers () {
    libCMSB_gt_ReplaceOrders_Init();
}

//--------------------------------------------------------------------------------------------------
// Library Initialization
//--------------------------------------------------------------------------------------------------
bool libCMSB_InitLib_completed = false;

void libCMSB_InitLib () {
    if (libCMSB_InitLib_completed) {
        return;
    }

    libCMSB_InitLib_completed = true;

    libCMSB_InitLibraries();
    libCMSB_InitCustomScript();
    libCMSB_InitTriggers();
}

